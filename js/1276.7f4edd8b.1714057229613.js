"use strict";(self.webpackChunkpolkaswap_exchange_web=self.webpackChunkpolkaswap_exchange_web||[]).push([[1276],{71276:function(t,e,a){a.r(e),a.d(e,{default:function(){return f}});var i=a(23166),l=a(70655),s=a(36930),o=a(22620),n=a(89445),r=a(89334),d=a(68282),u=a(69781),c=a(49053);let p=class extends((0,n.Wr)(o.tA.NumberFormatterMixin,o.tA.FormattedAmountMixin,r.Z)){constructor(...t){super(...t),(0,i.Z)(this,"setAmountSliderValue",void 0),(0,i.Z)(this,"delimiters",s.FPNumber.DELIMITERS_CONFIG),(0,i.Z)(this,"value",void 0),(0,i.Z)(this,"max",void 0),(0,i.Z)(this,"token",void 0),(0,i.Z)(this,"balance",void 0),(0,i.Z)(this,"title",void 0),(0,i.Z)(this,"external",void 0),(0,i.Z)(this,"loading",void 0),(0,i.Z)(this,"disabled",void 0),(0,i.Z)(this,"isMaxAvailable",void 0),(0,i.Z)(this,"isSelectAvailable",void 0),(0,i.Z)(this,"withSlider",void 0),(0,i.Z)(this,"isFiatEditable",void 0),(0,i.Z)(this,"sliderValue",void 0),(0,i.Z)(this,"fiatDecimals",void 0),(0,i.Z)(this,"floatInput",void 0),(0,i.Z)(this,"fiatEl",void 0),(0,i.Z)(this,"fiatValue",""),(0,i.Z)(this,"fiatFocus",!1)}updateFiatValue(){this.fiatFocus||(this.fiatValue=this.fiatAmount.isZero()?"":this.fiatAmount.toFixed(this.fiatDecimals))}recalcValue(t){const e=!this.tokenPrice.isZero()&&t?new s.FPNumber(t).div(this.tokenPrice).toString():"";this.$emit("input",e)}setFiatValue(t){this.fiatValue=t===this.maxFiatValueFormatted?this.maxFiatValue.toFixed(this.fiatDecimals):t,this.recalcValue(t)}handleFiatFocus(){this.fiatFocus=!0,this.$emit("focus")}handleSliderFocus(){this.floatInput?.$children?.[0]?.focus?.(),this.$emit("focus")}handleFiatBlur(){this.fiatFocus=!1}get slideValue(){return this.sliderValue}set slideValue(t){this.setAmountSliderValue(t)}get isBalanceAvailable(){return!!this.balance&&!!this.token}get address(){return(this.external?this.token?.externalAddress:this.token?.address)??""}get decimals(){return(this.external?this.token?.externalDecimals:this.token?.decimals)??s.FPNumber.DEFAULT_PRECISION}get tokenPrice(){return this.token?s.FPNumber.fromCodecValue(this.getAssetFiatPrice(this.token)??d.m8):s.FPNumber.ZERO}get hasFiatValue(){return!this.tokenPrice.isZero()}get fpBalance(){return s.FPNumber.fromCodecValue(this.balance??d.m8,this.decimals)}get formattedBalance(){return this.fpBalance.toLocaleString()}get formattedFiatBalance(){return this.fpBalance.mul(this.tokenPrice).toLocaleString()}get fiatAmount(){return this.calcFiatAmount(this.value)}get maxValue(){return this.max||this.MaxInputNumber}get maxFiatValue(){return this.calcFiatAmount(this.maxValue)}get maxFiatValueFormatted(){return this.maxFiatValue.toString()}calcFiatAmount(t){return t?new s.FPNumber(t).mul(this.tokenPrice):s.FPNumber.ZERO}handleMax(){this.$emit("max",this.token)}handleSelectToken(){this.$emit("select")}handleSlideInputChange(t){this.$emit("slide",t)}handleSlideClick(){this.fiatEl?.$children?.[0]?.blur?.()}async mounted(){await this.$nextTick()}};(0,l.__decorate)([c.QF.orderBook.setAmountSliderValue],p.prototype,"setAmountSliderValue",void 0),(0,l.__decorate)([(0,n.fI)({type:String})],p.prototype,"value",void 0),(0,l.__decorate)([(0,n.fI)({type:[String,Number]})],p.prototype,"max",void 0),(0,l.__decorate)([(0,n.fI)({default:()=>null,type:Object})],p.prototype,"token",void 0),(0,l.__decorate)([(0,n.fI)({default:()=>null,type:String})],p.prototype,"balance",void 0),(0,l.__decorate)([(0,n.fI)({default:"",type:String})],p.prototype,"title",void 0),(0,l.__decorate)([(0,n.fI)({default:!1,type:Boolean})],p.prototype,"external",void 0),(0,l.__decorate)([(0,n.fI)({default:!1,type:Boolean})],p.prototype,"loading",void 0),(0,l.__decorate)([(0,n.fI)({default:!1,type:Boolean})],p.prototype,"disabled",void 0),(0,l.__decorate)([(0,n.fI)({default:!1,type:Boolean})],p.prototype,"isMaxAvailable",void 0),(0,l.__decorate)([(0,n.fI)({default:!1,type:Boolean})],p.prototype,"isSelectAvailable",void 0),(0,l.__decorate)([(0,n.fI)({default:!1,type:Boolean})],p.prototype,"withSlider",void 0),(0,l.__decorate)([(0,n.fI)({default:!0,type:Boolean})],p.prototype,"isFiatEditable",void 0),(0,l.__decorate)([(0,n.fI)({default:0,type:Number})],p.prototype,"sliderValue",void 0),(0,l.__decorate)([(0,n.fI)({default:2,type:Number})],p.prototype,"fiatDecimals",void 0),(0,l.__decorate)([(0,n.Rl)("floatInput")],p.prototype,"floatInput",void 0),(0,l.__decorate)([(0,n.Rl)("fiatEl")],p.prototype,"fiatEl",void 0),(0,l.__decorate)([(0,n.RL)("fiatAmount",{immediate:!0})],p.prototype,"updateFiatValue",null),p=(0,l.__decorate)([(0,n.wA)({components:{TokenSelectButton:(0,u.kF)(d.z8.TokenSelectButton),FormattedAmount:o.wx.FormattedAmount,FormattedAmountWithFiatValue:o.wx.FormattedAmountWithFiatValue,TokenAddress:o.wx.TokenAddress}})],p);var h=p,m=(0,a(1001).Z)(h,(function(){var t=this,e=t._self._c;t._self._setupProxy;return e("s-float-input",t._g(t._b({ref:"floatInput",staticClass:"token-input",attrs:{size:"medium","has-locale-string":"",disabled:t.disabled,value:t.value,max:t.maxValue},scopedSlots:t._u([{key:"bottom",fn:function(){return[t._t("bottom",(function(){return[e("div",{staticClass:"input-line input-line--footer"},[t.hasFiatValue?e("div",{staticClass:"s-flex"},[e("s-float-input",{ref:"fiatEl",staticClass:"token-input--fiat",attrs:{size:"mini","has-locale-string":"",decimals:2,delimiters:t.$attrs.delimiters,disabled:t.disabled,max:t.maxFiatValueFormatted,readonly:!t.isFiatEditable,value:t.fiatValue},on:{input:t.setFiatValue,focus:t.handleFiatFocus,blur:t.handleFiatBlur}},[e("span",{staticClass:"input-prefix",attrs:{slot:"left"},slot:"left"},[t._v("$")])]),t._t("fiat-amount-append")],2):t._e(),t.address?e("token-address",t._b({staticClass:"input-value",attrs:{external:t.external}},"token-address",t.token,!1)):t._e()],1),t.withSlider?e("div",{staticClass:"input-line--footer-with-slider",on:{click:t.handleSliderFocus}},[e("div",{staticClass:"delimiter"}),e("s-slider",{staticClass:"slider-container",attrs:{value:t.slideValue,disabled:!t.withSlider,"show-tooltip":!1,marks:{0:"",25:"",50:"",75:"",100:""}},on:{input:t.handleSlideInputChange},nativeOn:{mousedown:function(e){return t.handleSlideClick.apply(null,arguments)}}})],1):t._e()]})),t._t("default")]},proxy:!0}],null,!0)},"s-float-input",{decimals:t.decimals,delimiters:t.delimiters,...t.$attrs},!1),t.$listeners),[e("div",{staticClass:"input-line",attrs:{slot:"top"},slot:"top"},[e("div",{staticClass:"input-title"},[e("span",{staticClass:"input-title--uppercase input-title--primary"},[t._v(t._s(t.title))]),t._t("title-append")],2),e("div",{staticClass:"input-value"},[t._t("balance",(function(){return[t.isBalanceAvailable?[e("span",{staticClass:"input-value--uppercase"},[t._v(t._s(t.t("balanceText")))]),e("formatted-amount-with-fiat-value",{attrs:{"value-can-be-hidden":"","with-left-shift":"","value-class":"input-value--primary",value:t.formattedBalance,"has-fiat-value":t.hasFiatValue,"fiat-value":t.formattedFiatBalance}})]:t._e()]}))],2)]),e("div",{staticClass:"s-flex el-buttons",attrs:{slot:"right"},slot:"right"},[t.isMaxAvailable?e("s-button",{staticClass:"el-button--max s-typography-button--small",attrs:{type:"primary",alternative:"",size:"mini","border-radius":"mini",loading:t.loading,disabled:t.disabled},on:{click:function(e){return e.stopPropagation(),t.handleMax.apply(null,arguments)}}},[t._v(" "+t._s(t.t("buttons.max"))+" ")]):t._e(),t.token||t.isSelectAvailable?e("token-select-button",{attrs:{icon:"chevron-down-rounded-16",disabled:!t.isSelectAvailable,token:t.token},on:{click:function(e){return e.stopPropagation(),t.handleSelectToken.apply(null,arguments)}}}):t._e()],1)])}),[],!1,null,"a4e5da26",null),f=m.exports}}]);