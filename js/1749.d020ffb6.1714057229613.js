"use strict";(self.webpackChunkpolkaswap_exchange_web=self.webpackChunkpolkaswap_exchange_web||[]).push([[1749],{81749:function(t,s,e){e.r(s),e.d(s,{default:function(){return w}});var i,a=e(23166),o=e(70655),n=e(82753),l=e(22620),c=e(52612),d=e.n(c),h=e(89445),r=e(42883),u=e(89334),A=e(68282),y=e(69781),p=e(49053),v=e(11628);function b(t,s){return t.reduce(((t,e)=>(!l.hi.assets.isWhitelist(e,s)&&e.decimals&&(t[e.address]=e),t)),{})}!function(t){t.Assets="assets",t.Custom="custom"}(i||(i={}));let _=class extends((0,h.Wr)(u.Z,r.Z,l.tA.LoadingMixin)){constructor(...t){super(...t),(0,a.Z)(this,"tokenTabs",[i.Assets,i.Custom]),(0,a.Z)(this,"tabValue",d()(this.tokenTabs)),(0,a.Z)(this,"isSynthsOnly",!1),(0,a.Z)(this,"connected",void 0),(0,a.Z)(this,"asset",void 0),(0,a.Z)(this,"disabledCustom",void 0),(0,a.Z)(this,"isFirstTokenSelected",void 0),(0,a.Z)(this,"isAddLiquidity",void 0),(0,a.Z)(this,"shouldBalanceBeHidden",void 0),(0,a.Z)(this,"assets",void 0),(0,a.Z)(this,"accountAssets",void 0),(0,a.Z)(this,"libraryTheme",void 0),(0,a.Z)(this,"whitelistAssets",void 0),(0,a.Z)(this,"isLoggedIn",void 0),(0,a.Z)(this,"whitelist",void 0),(0,a.Z)(this,"whitelistIdsBySymbol",void 0),(0,a.Z)(this,"addAsset",void 0)}async handleTabReset(t){t&&(this.tabValue=d()(this.tokenTabs))}get nonWhitelistAssets(){return b(this.assets,this.whitelist)}get nonWhitelistAccountAssets(){return b(this.accountAssets,this.whitelist)}get whitelistAssetsList(){let t=[];t=this.isAddLiquidity?this.isFirstTokenSelected?this.mainLPSources:this.whitelistAssets.filter((t=>t.address!==n.XOR.address)):this.whitelistAssets,this.isSynthsOnly&&(t=t.filter((t=>v.HM.test(t.address))));const s=t.map((t=>t.address)),e=this.asset?.address;return[...this.getAssetsWithBalances(s,e)].sort(this.sortByBalance)}get filteredWhitelistTokens(){return this.filterAssetsByQuery(this.whitelistAssetsList)(this.searchQuery)}get isCustomTabActive(){return this.tabValue===i.Custom}get shouldAssetsListBeShown(){return!(this.isCustomTabActive&&!this.activeAssetsList.length&&this.searchQuery)}get assetsListSize(){return this.isCustomTabActive?5:6}get activeAssetsList(){return this.isCustomTabActive?this.sortedNonWhitelistAccountAssets:this.filteredWhitelistTokens}get activeSearchPlaceholder(){return this.t(this.isCustomTabActive?"selectToken.custom.search":"selectToken.searchPlaceholder")}get alreadyAttached(){return!!this.nonWhitelistAccountAssets[this.searchQuery]}get customAsset(){return this.nonWhitelistAssets[this.searchQuery]??null}get sortedNonWhitelistAccountAssets(){const{asset:t}=this;return this.getAssetsWithBalances(Object.keys(this.nonWhitelistAccountAssets),t?.address).sort(this.sortByBalance)}get mainLPSources(){const t=l.hi.dex.poolBaseAssetsIds;return this.assets.filter((s=>t.includes(s.address)))}async handleAddAsset(){this.customAsset&&(this.isLoggedIn?(await this.withLoading((async()=>await this.addAsset((this.customAsset||{}).address))),this.handleClearSearch()):this.selectAsset(this.customAsset))}handleRemoveCustomAsset(t){l.hi.assets.removeAccountAsset(t.address)}handleTabChange(t){this.tabValue=t,this.clearAndFocusSearch()}};(0,o.__decorate)([(0,h.fI)({default:!1,type:Boolean})],_.prototype,"connected",void 0),(0,o.__decorate)([(0,h.fI)({default:A.u8,type:Object})],_.prototype,"asset",void 0),(0,o.__decorate)([(0,h.fI)({default:!1,type:Boolean})],_.prototype,"disabledCustom",void 0),(0,o.__decorate)([(0,h.fI)({default:!1,type:Boolean})],_.prototype,"isFirstTokenSelected",void 0),(0,o.__decorate)([(0,h.fI)({default:!1,type:Boolean})],_.prototype,"isAddLiquidity",void 0),(0,o.__decorate)([p.SB.wallet.settings.shouldBalanceBeHidden],_.prototype,"shouldBalanceBeHidden",void 0),(0,o.__decorate)([p.SB.wallet.account.assets],_.prototype,"assets",void 0),(0,o.__decorate)([p.SB.wallet.account.accountAssets],_.prototype,"accountAssets",void 0),(0,o.__decorate)([p.Yn.libraryTheme],_.prototype,"libraryTheme",void 0),(0,o.__decorate)([p.Yn.assets.whitelistAssets],_.prototype,"whitelistAssets",void 0),(0,o.__decorate)([p.Yn.wallet.account.isLoggedIn],_.prototype,"isLoggedIn",void 0),(0,o.__decorate)([p.Yn.wallet.account.whitelist],_.prototype,"whitelist",void 0),(0,o.__decorate)([p.Yn.wallet.account.whitelistIdsBySymbol],_.prototype,"whitelistIdsBySymbol",void 0),(0,o.__decorate)([p.aD.wallet.account.addAsset],_.prototype,"addAsset",void 0),(0,o.__decorate)([(0,h.RL)("visible")],_.prototype,"handleTabReset",null),_=(0,o.__decorate)([(0,h.wA)({components:{DialogBase:l.wx.DialogBase,SelectAssetList:(0,y.kF)(A.z8.SelectAssetList),SyntheticSwitcher:l.wx.SyntheticSwitcher,TokenAddress:l.wx.TokenAddress,SearchInput:l.wx.SearchInput,AddAssetDetailsCard:l.wx.AddAssetDetailsCard}})],_);var m=_,w=(0,e(1001).Z)(m,(function(){var t=this,s=t._self._c;t._self._setupProxy;return s("dialog-base",{attrs:{visible:t.isVisible,title:t.t("selectToken.title"),"custom-class":"asset-select"},on:{"update:visible":function(s){t.isVisible=s}}},[s("s-tabs",{staticClass:"s-tabs--exchange",attrs:{value:t.tabValue,type:"rounded"},on:{input:t.handleTabChange}},[s("search-input",{ref:"search",staticClass:"token-search",attrs:{placeholder:t.activeSearchPlaceholder,autofocus:""},on:{clear:t.handleClearSearch},model:{value:t.query,callback:function(s){t.query=s},expression:"query"}}),s("s-tab",{attrs:{label:t.t("selectToken.assets.title"),name:"assets"}},[s("synthetic-switcher",{staticClass:"token-synthetic-switcher",model:{value:t.isSynthsOnly,callback:function(s){t.isSynthsOnly=s},expression:"isSynthsOnly"}})],1),s("s-tab",{staticClass:"asset-select__info",attrs:{disabled:t.disabledCustom,label:t.t("selectToken.custom.title"),name:"custom"}},[t.customAsset?[t.alreadyAttached?s("span",[t._v(t._s(t.t("selectToken.custom.alreadyAttached")))]):s("add-asset-details-card",{attrs:{asset:t.customAsset,theme:t.libraryTheme,whitelist:t.whitelist,"whitelist-ids-by-symbol":t.whitelistIdsBySymbol,loading:t.loading},on:{add:t.handleAddAsset}})]:t.searchQuery?s("span",[t._v(t._s(t.t("selectToken.custom.notFound")))]):t._e(),t.connected&&t.sortedNonWhitelistAccountAssets.length?s("div",{staticClass:"token-list_text"},[t._v(" "+t._s(t.sortedNonWhitelistAccountAssets.length)+" "+t._s(t.t("selectToken.custom.text"))+" ")]):t._e()],2),s("select-asset-list",{directives:[{name:"show",rawName:"v-show",value:t.shouldAssetsListBeShown,expression:"shouldAssetsListBeShown"}],attrs:{assets:t.activeAssetsList,size:t.assetsListSize,connected:t.connected,"should-balance-be-hidden":t.shouldBalanceBeHidden,"has-fiat-value":""},on:{click:t.selectAsset},scopedSlots:t._u([{key:"action",fn:function(e){return[t.isCustomTabActive?s("div",{staticClass:"token-item__remove",on:{click:function(s){return s.stopPropagation(),t.handleRemoveCustomAsset(e)}}},[s("s-icon",{attrs:{name:"basic-trash-24"}})],1):t._e()]}}])})],1)],1)}),[],!1,null,"287ba944",null).exports}}]);