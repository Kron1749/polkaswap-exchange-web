"use strict";(self.webpackChunkpolkaswap_exchange_web=self.webpackChunkpolkaswap_exchange_web||[]).push([[1803],{91803:function(e,t,o){o.r(t),o.d(t,{default:function(){return h}});var s=o(23166),i=o(70655),a=o(59739),r=o(22620),l=o(89445),n=o(68282),d=o(69781),c=o(49053);let u=class extends((0,l.Wr)(r.tA.TransactionMixin,r.tA.DialogMixin)){constructor(...e){super(...e),(0,s.Z)(this,"baseValue",void 0),(0,s.Z)(this,"quoteValue",void 0),(0,s.Z)(this,"side",void 0),(0,s.Z)(this,"slippageTolerance",void 0),(0,s.Z)(this,"fromValue",void 0),(0,s.Z)(this,"toValue",void 0),(0,s.Z)(this,"selectedDexId",void 0),(0,s.Z)(this,"tokenFrom",void 0),(0,s.Z)(this,"tokenTo",void 0),(0,s.Z)(this,"baseAsset",void 0),(0,s.Z)(this,"quoteAsset",void 0),(0,s.Z)(this,"isMarketType",void 0),(0,s.Z)(this,"isInsufficientBalance",void 0),(0,s.Z)(this,"isBuySide",void 0)}get title(){return this.isMarketType?this.t("orderBook.dialog.placeMarket"):this.t("orderBook.dialog.placeLimit")}get upperText(){const e=this.baseAsset?.symbol;return this.isMarketType?this.isBuySide?this.t("orderBook.dialog.buy",{amount:this.toValue,symbol:e}):this.t("orderBook.dialog.sell",{amount:this.baseValue,symbol:e}):this.isBuySide?this.t("orderBook.dialog.buy",{amount:this.baseValue,symbol:e}):this.t("orderBook.dialog.sell",{amount:this.baseValue,symbol:e})}get lowerText(){return this.t("orderBook.dialog.at",{price:this.quoteValue,symbol:this.quoteAsset?.symbol})}placeLimitOrder(){return r.hi.orderBook.placeLimitOrder(this.baseAsset,this.quoteAsset,this.quoteValue,this.baseValue,this.side)}placeMarketOrder(){return r.hi.swap.execute(this.tokenFrom,this.tokenTo,this.fromValue,this.toValue,this.slippageTolerance,this.isBuySide,a.LiquiditySourceTypes.OrderBook,this.selectedDexId)}async singlePriceReachedLimit(){return!await r.hi.orderBook.isOrderPlaceable(this.baseAsset.address,this.quoteAsset.address,this.side,this.quoteValue)}async handleConfirmSwap(){if(this.isInsufficientBalance)return this.$alert(this.t("exchange.insufficientBalance",{tokenSymbol:this.tokenFrom?this.tokenFrom.symbol:""}),{title:this.t("errorText")}),this.$emit("confirm"),void(this.isVisible=!1);try{await this.withNotifications((async()=>{if(await this.singlePriceReachedLimit())this.$alert(this.t("orderBook.error.singlePriceLimit.reading"),{title:this.t("errorText")}),this.$emit("confirm");else{const e=this.isMarketType?this.placeMarketOrder:this.placeLimitOrder;await e(),this.$emit("confirm",!0)}}))}catch(e){this.$emit("confirm")}this.isVisible=!1}};(0,i.__decorate)([c.SB.orderBook.baseValue],u.prototype,"baseValue",void 0),(0,i.__decorate)([c.SB.orderBook.quoteValue],u.prototype,"quoteValue",void 0),(0,i.__decorate)([c.SB.orderBook.side],u.prototype,"side",void 0),(0,i.__decorate)([c.SB.settings.slippageTolerance],u.prototype,"slippageTolerance",void 0),(0,i.__decorate)([c.SB.swap.fromValue],u.prototype,"fromValue",void 0),(0,i.__decorate)([c.SB.swap.toValue],u.prototype,"toValue",void 0),(0,i.__decorate)([c.SB.swap.selectedDexId],u.prototype,"selectedDexId",void 0),(0,i.__decorate)([c.Yn.swap.tokenFrom],u.prototype,"tokenFrom",void 0),(0,i.__decorate)([c.Yn.swap.tokenTo],u.prototype,"tokenTo",void 0),(0,i.__decorate)([c.Yn.orderBook.baseAsset],u.prototype,"baseAsset",void 0),(0,i.__decorate)([c.Yn.orderBook.quoteAsset],u.prototype,"quoteAsset",void 0),(0,i.__decorate)([(0,l.fI)({default:!1,type:Boolean})],u.prototype,"isMarketType",void 0),(0,i.__decorate)([(0,l.fI)({default:!1,type:Boolean})],u.prototype,"isInsufficientBalance",void 0),(0,i.__decorate)([(0,l.fI)({default:!0,type:Boolean})],u.prototype,"isBuySide",void 0),u=(0,i.__decorate)([(0,l.wA)({components:{DialogBase:r.wx.DialogBase,TokenLogo:r.wx.TokenLogo,PlaceTransactionDetails:(0,d.kF)(n.z8.PlaceTransactionDetails)}})],u);var p=u,h=(0,o(1001).Z)(p,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("dialog-base",{attrs:{visible:e.isVisible,title:e.title,"custom-class":"dialog--confirm-swap"},on:{"update:visible":function(t){e.isVisible=t}},scopedSlots:e._u([{key:"footer",fn:function(){return[t("s-button",{staticClass:"s-typography-button--large",attrs:{type:"primary",disabled:e.loading},on:{click:e.handleConfirmSwap}},[e._v(" "+e._s(e.t("exchange.confirm"))+" ")])]},proxy:!0}])},[t("div",{staticClass:"tokens"},[t("div",{staticClass:"tokens-info-container"},[t("span",{staticClass:"token-value"},[e._v(e._s(e.upperText))]),t("token-logo",{staticClass:"token-logo",attrs:{token:e.baseAsset}})],1),t("div",{staticClass:"tokens-info-container"},[t("span",{staticClass:"token-value"},[e._v(e._s(e.lowerText))]),t("token-logo",{staticClass:"token-logo",attrs:{token:e.quoteAsset}})],1)]),t("place-transaction-details",{staticClass:"transaction-details",attrs:{"is-market-type":e.isMarketType}})],1)}),[],!1,null,"47ce52e0",null).exports}}]);