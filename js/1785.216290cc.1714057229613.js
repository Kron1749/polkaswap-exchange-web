"use strict";(self.webpackChunkpolkaswap_exchange_web=self.webpackChunkpolkaswap_exchange_web||[]).push([[1785],{41785:function(e,t,o){o.r(t),o.d(t,{default:function(){return b}});var n=o(23166),r=(o(70560),o(70655)),i=o(36930),s=o(82753),a=o(22620),d=o(89445),l=o(89334),u=o(68282),m=o(69781),c=o(49053),h=o(50961);let f=class extends((0,d.Wr)(a.tA.FormattedAmountMixin,l.Z,a.tA.LoadingMixin)){constructor(...e){super(...e),(0,n.Z)(this,"shouldBalanceBeHidden",void 0),(0,n.Z)(this,"networkFees",void 0),(0,n.Z)(this,"amount",void 0),(0,n.Z)(this,"xor",void 0),(0,n.Z)(this,"setAmount",void 0),(0,n.Z)(this,"resetAmount",void 0),(0,n.Z)(this,"delimiters",i.FPNumber.DELIMITERS_CONFIG),(0,n.Z)(this,"showConfirmBondDialog",!1)}get xorSymbol(){return s.XOR.symbol}get xorDecimals(){return s.XOR.decimals}get xorBalance(){return this.xor?.balance}get balance(){return(0,h.rh)(this.xor,{isBondedBalance:this.isBondedBalance})}get isBond(){return this.$route.name===u.sn.ReferralBonding}get isBondedBalance(){return!this.isBond}get hasZeroAmount(){return(0,h.yA)(this.amount)}get isMaxButtonAvailable(){if(this.shouldBalanceBeHidden)return!1;const e=this.getFPNumberFromCodec(this.xorBalance?.transferable??u.m8,this.xorDecimals),t=this.getFPNumber(this.amount,this.xorDecimals);if(this.fpNumberNetworkFee.isZero())return!1;if(this.isBondedBalance){const t=this.xorBalance?.bonded??u.m8;return!this.getFPNumberFromCodec(t,this.xorDecimals).isZero()&&i.FPNumber.gt(e,this.fpNumberNetworkFee)}return!i.FPNumber.eq(this.fpNumberNetworkFee,e.sub(t))&&i.FPNumber.gt(e,this.fpNumberNetworkFee)}get isInsufficientBondedXor(){return!!this.xor&&(0,h.Vl)(this.xor,this.amount,this.networkFee,{isBondedBalance:this.isBondedBalance})}get isInsufficientXorForFee(){return this.isBondedBalance?i.FPNumber.gt(this.fpNumberNetworkFee,this.getFPNumberFromCodec(this.xorBalance?.transferable??u.m8,this.xorDecimals)):!!this.xor&&(0,h.Vl)(this.xor,this.amount,this.networkFee)}get networkFee(){return this.networkFees[this.isBond?i.Operation.ReferralReserveXor:i.Operation.ReferralUnreserveXor]}get fpNumberNetworkFee(){return this.getFPNumberFromCodec(this.networkFee)}get networkFeeFormatted(){return this.formatCodecNumber(this.networkFee)}get isConfirmBondDisabled(){return this.hasZeroAmount||this.isInsufficientXorForFee||this.isInsufficientBondedXor}handleInputXor(e){e!==this.amount&&this.setAmount(e)}handleMaxValue(){const{xor:e,networkFee:t,isBondedBalance:o}=this;e&&this.handleInputXor((0,h.MN)(e,t,{isBondedBalance:o}))}handleConfirmBond(){this.showConfirmBondDialog=!0}async confirmBond(e){e&&(this.resetAmount(),this.handleBack())}handleBack(){m.ZP.push({name:u.sn.ReferralProgram})}destroyed(){this.resetAmount()}};(0,r.__decorate)([c.SB.wallet.settings.shouldBalanceBeHidden],f.prototype,"shouldBalanceBeHidden",void 0),(0,r.__decorate)([c.SB.wallet.settings.networkFees],f.prototype,"networkFees",void 0),(0,r.__decorate)([c.SB.referrals.amount],f.prototype,"amount",void 0),(0,r.__decorate)([c.Yn.assets.xor],f.prototype,"xor",void 0),(0,r.__decorate)([c.QF.referrals.setAmount],f.prototype,"setAmount",void 0),(0,r.__decorate)([c.QF.referrals.resetAmount],f.prototype,"resetAmount",void 0),f=(0,r.__decorate)([(0,d.wA)({components:{GenericPageHeader:(0,m.kF)(u.z8.GenericPageHeader),TokenInput:(0,m.kF)(u.z8.TokenInput),ReferralsConfirmBonding:(0,m.kF)(u.z8.ReferralsConfirmBonding),InfoLine:a.wx.InfoLine}})],f);var B=f,b=(0,o(1001).Z)(B,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.parentLoading,expression:"parentLoading"}],staticClass:"container"},[t("generic-page-header",{attrs:{"has-button-back":"",title:e.t("referralProgram."+(e.isBond?"bondTitle":"unbondTitle"))},on:{back:e.handleBack}}),t("s-form",{staticClass:"el-form--actions",attrs:{"show-message":!1}},[t("token-input",{attrs:{balance:e.balance,"is-max-available":e.isMaxButtonAvailable,title:e.t("referralProgram."+(e.isBond?"deposit":"action.unbond")),token:e.xor,value:e.amount},on:{input:e.handleInputXor,max:e.handleMaxValue}}),t("s-button",{staticClass:"action-button s-typography-button--large",attrs:{type:"primary",disabled:e.isConfirmBondDisabled},on:{click:e.handleConfirmBond}},[e.hasZeroAmount?[e._v(" "+e._s(e.t("buttons.enterAmount"))+" ")]:e.isInsufficientXorForFee?[e._v(" "+e._s(e.t("insufficientBalanceText",{tokenSymbol:e.xorSymbol}))+" ")]:e.isBondedBalance&&e.isInsufficientBondedXor?[e._v(" "+e._s(e.t("referralProgram.insufficientBondedBalance"))+" ")]:[e._v(" "+e._s(e.t("referralProgram.action."+(e.isBond?"bond":"unbond")))+" ")]],2),t("info-line",{attrs:{label:e.t("networkFeeText"),"label-tooltip":e.t("networkFeeTooltipText"),value:e.networkFeeFormatted,"asset-symbol":e.xorSymbol,"fiat-value":e.getFiatAmountByCodecString(e.networkFee),"is-formatted":""}}),t("referrals-confirm-bonding",{attrs:{visible:e.showConfirmBondDialog},on:{"update:visible":function(t){e.showConfirmBondDialog=t},confirm:e.confirmBond}})],1)],1)}),[],!1,null,"10a1670c",null).exports}}]);